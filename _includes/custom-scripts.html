
<script>
// Guardamos las funciones originales
const originalReplaceState = history.replaceState;
const originalPushState = history.pushState;

// Interceptamos replaceState
history.replaceState = function(state, title, url) {
  if (url && (url.endsWith("#") || url.endsWith("#/") || url === "#")) {
    url = location.pathname + location.search;
  }
  return originalReplaceState.apply(this, [state, title, url]);
};

// Interceptamos pushState
history.pushState = function(state, title, url) {
  if (url && (url.endsWith("#") || url.endsWith("#/") || url === "#")) {
    url = location.pathname + location.search;
  }
  return originalPushState.apply(this, [state, title, url]);
};

// Limpieza continua por si alg√∫n script mete el hash directamente
function limpiar() {
  if (location.hash === "#" || location.hash === "#/") {
    history.replaceState(null, null, location.pathname + location.search);
  }
  requestAnimationFrame(limpiar);
}
requestAnimationFrame(limpiar);
</script>
